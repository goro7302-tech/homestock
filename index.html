<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="HomeStock">
  <meta name="theme-color" content="#10b981">
  <meta name="description" content="Smart inventory management for your home. Track food, appliances, and daily supplies with expiry notifications.">
  <title>HomeStock - Smart Home Inventory</title>
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  
  <!-- Apple Touch Icon -->
  <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEyOCIgaGVpZ2h0PSIxMjgiIHJ4PSIyNCIgZmlsbD0iIzEwYjk4MSIvPjxwYXRoIGQ9Ik02NCAxNkw0MCw0MEg1NlY4MEg3MlY0MEg4OEw2NCwxNloiIGZpbGw9IndoaXRlIi8+PHBhdGggZD0iTTMyIDk2SDk2VjExMkgzMlY5NloiIGZpbGw9IndoaXRlIi8+PC9zdmc+">
  
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * {
      -webkit-tap-highlight-color: transparent;
    }
    body {
      margin: 0;
      padding: 0;
      overscroll-behavior: none;
      -webkit-overflow-scrolling: touch;
    }
    input, select, textarea, button {
      font-size: 16px !important;
    }
    
    /* Install prompt animation */
    @keyframes slideUp {
      from {
        transform: translateY(100%);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    
    .install-prompt {
      animation: slideUp 0.3s ease-out;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useEffect } = React;
    
    // Icons
    const { Plus, Search, Package, Trash2, Calendar, MapPin, Tag, ShoppingCart, Bell, X, Download, Globe, Crown, Zap, Check } = (() => {
      const createIcon = (path) => ({ size = 24, color = 'currentColor', style = {} }) => (
        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" style={style}>
          {path}
        </svg>
      );
      
      return {
        Plus: createIcon(<><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></>),
        Search: createIcon(<><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></>),
        Package: createIcon(<><line x1="16.5" y1="9.4" x2="7.5" y2="4.21"></line><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></>),
        Trash2: createIcon(<><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></>),
        Calendar: createIcon(<><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></>),
        MapPin: createIcon(<><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></>),
        Tag: createIcon(<><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></>),
        ShoppingCart: createIcon(<><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></>),
        Bell: createIcon(<><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></>),
        X: createIcon(<><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></>),
        Download: createIcon(<><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></>),
        Globe: createIcon(<><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></>),
        Crown: createIcon(<><path d="M2 12l3-3 4 4 4-4 4 4 3-3v9H2z"></path><path d="M2 21h20"></path></>),
        Zap: createIcon(<><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></>),
        Check: createIcon(<><polyline points="20 6 9 17 4 12"></polyline></>),
      };
    })();

    // Translations
    const translations = {
      ja: {
        appName: 'HomeStock',
        tagline: 'ã„ã¾ã€å®¶ã«ä½•ãŒã‚ã‚‹?ã‚’ãƒã‚±ãƒƒãƒˆã«ã€‚',
        add: 'è¿½åŠ ',
        search: 'Search placeholder',
        searchPlaceholder: 'å•†å“åã‚„åº—åã§æ¤œç´¢...',
        allCategories: 'å…¨ã‚«ãƒ†ã‚´ãƒªãƒ¼',
        allLocations: 'å…¨ä¿ç®¡å ´æ‰€',
        noItems: 'ã¾ã ã‚¢ã‚¤ãƒ†ãƒ ãŒã‚ã‚Šã¾ã›ã‚“',
        noItemsDesc: 'ã€Œè¿½åŠ ã€ãƒœã‚¿ãƒ³ã‹ã‚‰æœ€åˆã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’ç™»éŒ²ã—ã¾ã—ã‚‡ã†',
        noResults: 'è©²å½“ã™ã‚‹ã‚¢ã‚¤ãƒ†ãƒ ãŒã‚ã‚Šã¾ã›ã‚“',
        noResultsDesc: 'æ¤œç´¢æ¡ä»¶ã‚’å¤‰æ›´ã—ã¦ã¿ã¦ãã ã•ã„',
        expiryNotifications: 'æœŸé™é€šçŸ¥',
        noExpiring: 'æœŸé™ãŒè¿‘ã„ã‚¢ã‚¤ãƒ†ãƒ ã¯ã‚ã‚Šã¾ã›ã‚“',
        expired: 'æœŸé™åˆ‡ã‚Œ',
        expiryToday: 'æœ¬æ—¥æœŸé™',
        daysLeft: 'æ®‹ã‚Š{days}æ—¥',
        categories: {
          food: 'é£Ÿæ–™å“',
          appliance: 'å®¶é›»',
          daily: 'æ—¥ç”¨å“'
        },
        locations: {
          refrigerator: 'å†·è”µåº«',
          freezer: 'å†·å‡åº«',
          pantry: 'ãƒ‘ãƒ³ãƒˆãƒªãƒ¼',
          kitchen: 'ã‚­ãƒƒãƒãƒ³',
          bathroom: 'æ´—é¢æ‰€',
          storage: 'åŽç´',
          other: 'ãã®ä»–'
        },
        addItem: 'æ–°ã—ã„ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¿½åŠ ',
        itemName: 'å•†å“å',
        itemNamePlaceholder: 'ä¾‹: ç‰›ä¹³ã€ãƒ†ã‚£ãƒƒã‚·ãƒ¥ãƒšãƒ¼ãƒ‘ãƒ¼',
        category: 'ã‚«ãƒ†ã‚´ãƒªãƒ¼',
        quantity: 'æ•°é‡',
        price: 'ä¾¡æ ¼ (å††)',
        optional: 'ä»»æ„',
        purchaseDate: 'è³¼å…¥æ—¥',
        expiryDate: 'æ¶ˆè²»æœŸé™',
        location: 'ä¿ç®¡å ´æ‰€',
        store: 'è³¼å…¥åº—',
        storePlaceholder: 'ä¾‹: ã‚³ã‚¹ãƒˆã‚³',
        notes: 'ãƒ¡ãƒ¢',
        notesPlaceholder: 'è‡ªç”±ã«ãƒ¡ãƒ¢ã‚’è¨˜å…¥',
        cancel: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',
        addButton: 'è¿½åŠ ã™ã‚‹',
        deleteConfirm: 'ã“ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’å‰Šé™¤ã—ã¾ã™ã‹?',
        itemsRemaining: 'æ®‹ã‚Š{count}å€‹ç™»éŒ²å¯èƒ½',
        upgradePrompt: 'ã‚‚ã£ã¨ç™»éŒ²ã™ã‚‹ã«ã¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã¸',
        freePlan: 'ç„¡æ–™ãƒ—ãƒ©ãƒ³',
        premiumPlan: 'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ',
        proPlan: 'ãƒ—ãƒ­',
        perMonth: '/æœˆ',
        perYear: '/å¹´',
        comingSoon: 'è¿‘æ—¥å…¬é–‹',
        upgrade: 'ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰',
        exportData: 'ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ',
        installApp: 'ã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«',
        installDesc: 'ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã—ã¦ã‚¢ãƒ—ãƒªã®ã‚ˆã†ã«ä½¿ãˆã¾ã™',
        install: 'ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«',
        later: 'å¾Œã§',
      },
      en: {
        appName: 'HomeStock',
        tagline: 'What\'s in your home? In your pocket.',
        add: 'Add',
        searchPlaceholder: 'Search by name or store...',
        allCategories: 'All Categories',
        allLocations: 'All Locations',
        noItems: 'No items yet',
        noItemsDesc: 'Tap "Add" to register your first item',
        noResults: 'No matching items',
        noResultsDesc: 'Try changing your search criteria',
        expiryNotifications: 'Expiry Alerts',
        noExpiring: 'No items expiring soon',
        expired: 'Expired',
        expiryToday: 'Expires today',
        daysLeft: '{days} days left',
        categories: {
          food: 'Food',
          appliance: 'Appliances',
          daily: 'Daily Supplies'
        },
        locations: {
          refrigerator: 'Refrigerator',
          freezer: 'Freezer',
          pantry: 'Pantry',
          kitchen: 'Kitchen',
          bathroom: 'Bathroom',
          storage: 'Storage',
          other: 'Other'
        },
        addItem: 'Add New Item',
        itemName: 'Item Name',
        itemNamePlaceholder: 'e.g., Milk, Tissues',
        category: 'Category',
        quantity: 'Quantity',
        price: 'Price',
        optional: 'Optional',
        purchaseDate: 'Purchase Date',
        expiryDate: 'Expiry Date',
        location: 'Location',
        store: 'Store',
        storePlaceholder: 'e.g., Costco',
        notes: 'Notes',
        notesPlaceholder: 'Add notes here',
        cancel: 'Cancel',
        addButton: 'Add Item',
        deleteConfirm: 'Delete this item?',
        itemsRemaining: '{count} items remaining',
        upgradePrompt: 'Upgrade to add more',
        freePlan: 'Free',
        premiumPlan: 'Premium',
        proPlan: 'Pro',
        perMonth: '/mo',
        perYear: '/yr',
        comingSoon: 'Coming Soon',
        upgrade: 'Upgrade',
        exportData: 'Export Data',
        installApp: 'Install App',
        installDesc: 'Add to home screen for app-like experience',
        install: 'Install',
        later: 'Later',
      }
    };

    const HomeStock = () => {
      const [items, setItems] = useState([]);
      const [showAddForm, setShowAddForm] = useState(false);
      const [searchQuery, setSearchQuery] = useState('');
      const [filterCategory, setFilterCategory] = useState('all');
      const [filterLocation, setFilterLocation] = useState('all');
      const [showNotifications, setShowNotifications] = useState(false);
      const [showUpgradeModal, setShowUpgradeModal] = useState(false);
      const [showInstallPrompt, setShowInstallPrompt] = useState(false);
      const [deferredPrompt, setDeferredPrompt] = useState(null);
      const [language, setLanguage] = useState('ja');
      
      const t = translations[language];
      const MAX_FREE_ITEMS = 30;
      
      const [formData, setFormData] = useState({
        name: '',
        category: 'food',
        quantity: 1,
        price: '',
        purchaseDate: new Date().toISOString().split('T')[0],
        expiryDate: '',
        location: 'refrigerator',
        store: '',
        notes: ''
      });

      const categories = [
        { id: 'food', name: t.categories.food, icon: 'ðŸŽ', color: '#10b981' },
        { id: 'appliance', name: t.categories.appliance, icon: 'ðŸ“±', color: '#3b82f6' },
        { id: 'daily', name: t.categories.daily, icon: 'ðŸ§´', color: '#f59e0b' }
      ];

      const locations = [
        { id: 'refrigerator', name: t.locations.refrigerator },
        { id: 'freezer', name: t.locations.freezer },
        { id: 'pantry', name: t.locations.pantry },
        { id: 'kitchen', name: t.locations.kitchen },
        { id: 'bathroom', name: t.locations.bathroom },
        { id: 'storage', name: t.locations.storage },
        { id: 'other', name: t.locations.other }
      ];

      // Load items and language preference
      useEffect(() => {
        const savedItems = localStorage.getItem('homestock_items');
        const savedLang = localStorage.getItem('homestock_language');
        if (savedItems) {
          setItems(JSON.parse(savedItems));
        }
        if (savedLang) {
          setLanguage(savedLang);
        }
        
        // Detect browser language
        if (!savedLang) {
          const browserLang = navigator.language.startsWith('ja') ? 'ja' : 'en';
          setLanguage(browserLang);
          localStorage.setItem('homestock_language', browserLang);
        }
      }, []);

      // Save items
      useEffect(() => {
        if (items.length > 0) {
          localStorage.setItem('homestock_items', JSON.stringify(items));
        }
      }, [items]);

      // PWA Install prompt
      useEffect(() => {
        const handleBeforeInstallPrompt = (e) => {
          e.preventDefault();
          setDeferredPrompt(e);
          setShowInstallPrompt(true);
        };

        window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);

        return () => {
          window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);
        };
      }, []);

      const handleInstallClick = async () => {
        if (!deferredPrompt) return;

        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        
        if (outcome === 'accepted') {
          setShowInstallPrompt(false);
        }
        
        setDeferredPrompt(null);
      };

      const toggleLanguage = () => {
        const newLang = language === 'ja' ? 'en' : 'ja';
        setLanguage(newLang);
        localStorage.setItem('homestock_language', newLang);
      };

      const getExpiryStatus = (expiryDate) => {
        if (!expiryDate) return null;
        const today = new Date();
        const expiry = new Date(expiryDate);
        const diffDays = Math.ceil((expiry - today) / (1000 * 60 * 60 * 24));
        
        if (diffDays < 0) return { status: 'expired', text: t.expired, color: '#ef4444' };
        if (diffDays === 0) return { status: 'today', text: t.expiryToday, color: '#f59e0b' };
        if (diffDays <= 3) return { status: 'warning', text: t.daysLeft.replace('{days}', diffDays), color: '#f59e0b' };
        if (diffDays <= 7) return { status: 'soon', text: t.daysLeft.replace('{days}', diffDays), color: '#fbbf24' };
        return { status: 'safe', text: t.daysLeft.replace('{days}', diffDays), color: '#10b981' };
      };

      const getExpiringItems = () => {
        return items.filter(item => {
          if (!item.expiryDate) return false;
          const status = getExpiryStatus(item.expiryDate);
          return status && ['expired', 'today', 'warning'].includes(status.status);
        }).sort((a, b) => new Date(a.expiryDate) - new Date(b.expiryDate));
      };

      const handleSubmit = (e) => {
        e.preventDefault();
        
        if (items.length >= MAX_FREE_ITEMS) {
          setShowUpgradeModal(true);
          return;
        }
        
        const newItem = {
          id: Date.now(),
          ...formData,
          createdAt: new Date().toISOString()
        };
        setItems([newItem, ...items]);
        setFormData({
          name: '',
          category: 'food',
          quantity: 1,
          price: '',
          purchaseDate: new Date().toISOString().split('T')[0],
          expiryDate: '',
          location: 'refrigerator',
          store: '',
          notes: ''
        });
        setShowAddForm(false);
      };

      const handleDelete = (id) => {
        if (window.confirm(t.deleteConfirm)) {
          setItems(items.filter(item => item.id !== id));
        }
      };

      const exportToCSV = () => {
        const headers = ['Name', 'Category', 'Quantity', 'Price', 'Purchase Date', 'Expiry Date', 'Location', 'Store', 'Notes'];
        const rows = items.map(item => [
          item.name,
          item.category,
          item.quantity,
          item.price || '',
          item.purchaseDate,
          item.expiryDate || '',
          item.location,
          item.store || '',
          item.notes || ''
        ]);
        
        const csv = [headers, ...rows].map(row => row.map(cell => `"${cell}"`).join(',')).join('\n');
        const blob = new Blob([csv], { type: 'text/csv' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `homestock_export_${new Date().toISOString().split('T')[0]}.csv`;
        a.click();
      };

      const filteredItems = items.filter(item => {
        const matchesSearch = item.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
                             item.store.toLowerCase().includes(searchQuery.toLowerCase());
        const matchesCategory = filterCategory === 'all' || item.category === filterCategory;
        const matchesLocation = filterLocation === 'all' || item.location === filterLocation;
        return matchesSearch && matchesCategory && matchesLocation;
      });

      const getCategoryInfo = (categoryId) => {
        return categories.find(c => c.id === categoryId);
      };

      const getLocationName = (locationId) => {
        return locations.find(l => l.id === locationId)?.name || locationId;
      };

      const expiringItems = getExpiringItems();
      const remainingItems = MAX_FREE_ITEMS - items.length;

      return (
        <div style={{
          minHeight: '100vh',
          background: 'linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 50%, #f0fdfa 100%)',
          fontFamily: "'Outfit', -apple-system, BlinkMacSystemFont, sans-serif",
          paddingBottom: 'env(safe-area-inset-bottom)'
        }}>
          {/* Header */}
          <header style={{
            background: 'rgba(255, 255, 255, 0.95)',
            backdropFilter: 'blur(10px)',
            borderBottom: '1px solid rgba(16, 185, 129, 0.1)',
            padding: '1rem 1.5rem',
            paddingTop: 'calc(1rem + env(safe-area-inset-top))',
            position: 'sticky',
            top: 0,
            zIndex: 100,
            boxShadow: '0 2px 12px rgba(0, 0, 0, 0.04)'
          }}>
            <div style={{ maxWidth: '1200px', margin: '0 auto', display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>
              <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem' }}>
                <div style={{
                  width: '40px',
                  height: '40px',
                  background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                  borderRadius: '12px',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center',
                  boxShadow: '0 4px 12px rgba(16, 185, 129, 0.3)'
                }}>
                  <Package color="white" size={24} />
                </div>
                <div>
                  <h1 style={{ 
                    fontSize: '1.5rem', 
                    fontWeight: '700', 
                    margin: 0,
                    background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                    WebkitBackgroundClip: 'text',
                    WebkitTextFillColor: 'transparent',
                    letterSpacing: '-0.02em'
                  }}>
                    {t.appName}
                  </h1>
                  <p style={{ fontSize: '0.75rem', color: '#6b7280', margin: 0 }}>{t.tagline}</p>
                </div>
              </div>
              
              <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>
                <button
                  onClick={toggleLanguage}
                  style={{
                    background: 'white',
                    border: '1px solid #e5e7eb',
                    borderRadius: '10px',
                    padding: '0.5rem',
                    cursor: 'pointer',
                    display: 'flex',
                    alignItems: 'center',
                    gap: '0.25rem',
                    fontSize: '0.75rem',
                    fontWeight: '600'
                  }}
                >
                  <Globe size={16} />
                  {language.toUpperCase()}
                </button>
                
                <button
                  onClick={() => setShowNotifications(!showNotifications)}
                  style={{
                    background: expiringItems.length > 0 ? '#fef3c7' : 'white',
                    border: '1px solid #e5e7eb',
                    borderRadius: '10px',
                    padding: '0.5rem',
                    cursor: 'pointer',
                    display: 'flex',
                    alignItems: 'center',
                    position: 'relative'
                  }}
                >
                  <Bell size={20} color={expiringItems.length > 0 ? '#f59e0b' : '#6b7280'} />
                  {expiringItems.length > 0 && (
                    <span style={{
                      position: 'absolute',
                      top: '-4px',
                      right: '-4px',
                      background: '#ef4444',
                      color: 'white',
                      borderRadius: '50%',
                      width: '20px',
                      height: '20px',
                      display: 'flex',
                      alignItems: 'center',
                      justifyContent: 'center',
                      fontSize: '0.7rem',
                      fontWeight: '700'
                    }}>
                      {expiringItems.length}
                    </span>
                  )}
                </button>
                
                <button
                  onClick={() => items.length >= MAX_FREE_ITEMS ? setShowUpgradeModal(true) : setShowAddForm(true)}
                  style={{
                    background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                    color: 'white',
                    border: 'none',
                    borderRadius: '10px',
                    padding: '0.5rem 1rem',
                    cursor: 'pointer',
                    display: 'flex',
                    alignItems: 'center',
                    gap: '0.5rem',
                    fontWeight: '600',
                    fontSize: '0.9rem',
                    boxShadow: '0 4px 12px rgba(16, 185, 129, 0.3)'
                  }}
                >
                  <Plus size={20} />
                  {t.add}
                </button>
              </div>
            </div>
          </header>

          {/* Install Prompt */}
          {showInstallPrompt && (
            <div className="install-prompt" style={{
              position: 'fixed',
              bottom: '20px',
              left: '20px',
              right: '20px',
              background: 'white',
              borderRadius: '16px',
              padding: '1.5rem',
              boxShadow: '0 10px 40px rgba(0, 0, 0, 0.15)',
              zIndex: 200,
              maxWidth: '400px',
              margin: '0 auto'
            }}>
              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '1rem' }}>
                <div>
                  <h3 style={{ margin: '0 0 0.5rem 0', fontSize: '1.1rem', fontWeight: '700' }}>
                    ðŸ“± {t.installApp}
                  </h3>
                  <p style={{ margin: 0, fontSize: '0.9rem', color: '#6b7280' }}>
                    {t.installDesc}
                  </p>
                </div>
                <button
                  onClick={() => setShowInstallPrompt(false)}
                  style={{ background: 'none', border: 'none', cursor: 'pointer', padding: '0.25rem' }}
                >
                  <X size={20} color="#9ca3af" />
                </button>
              </div>
              <div style={{ display: 'flex', gap: '0.75rem' }}>
                <button
                  onClick={() => setShowInstallPrompt(false)}
                  style={{
                    flex: 1,
                    padding: '0.75rem',
                    background: '#f3f4f6',
                    border: 'none',
                    borderRadius: '10px',
                    fontSize: '0.9rem',
                    fontWeight: '600',
                    cursor: 'pointer'
                  }}
                >
                  {t.later}
                </button>
                <button
                  onClick={handleInstallClick}
                  style={{
                    flex: 1,
                    padding: '0.75rem',
                    background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                    color: 'white',
                    border: 'none',
                    borderRadius: '10px',
                    fontSize: '0.9rem',
                    fontWeight: '600',
                    cursor: 'pointer',
                    boxShadow: '0 4px 12px rgba(16, 185, 129, 0.3)'
                  }}
                >
                  {t.install}
                </button>
              </div>
            </div>
          )}

          {/* Notifications Panel */}
          {showNotifications && (
            <div style={{
              position: 'fixed',
              top: 'calc(80px + env(safe-area-inset-top))',
              right: '20px',
              background: 'white',
              borderRadius: '16px',
              padding: '1.5rem',
              boxShadow: '0 10px 40px rgba(0, 0, 0, 0.15)',
              zIndex: 200,
              width: '320px',
              maxWidth: 'calc(100vw - 40px)',
              maxHeight: '400px',
              overflowY: 'auto'
            }}>
              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>
                <h3 style={{ margin: 0, fontSize: '1.1rem', fontWeight: '700' }}>ðŸ”” {t.expiryNotifications}</h3>
                <button
                  onClick={() => setShowNotifications(false)}
                  style={{ background: 'none', border: 'none', cursor: 'pointer' }}
                >
                  <X size={20} />
                </button>
              </div>
              
              {expiringItems.length === 0 ? (
                <p style={{ color: '#6b7280', textAlign: 'center', padding: '1rem 0' }}>
                  {t.noExpiring}
                </p>
              ) : (
                <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>
                  {expiringItems.map(item => {
                    const expiryInfo = getExpiryStatus(item.expiryDate);
                    return (
                      <div key={item.id} style={{
                        padding: '0.75rem',
                        background: '#f9fafb',
                        borderRadius: '8px',
                        borderLeft: `3px solid ${expiryInfo.color}`
                      }}>
                        <div style={{ fontWeight: '600', marginBottom: '0.25rem' }}>{item.name}</div>
                        <div style={{ fontSize: '0.85rem', color: expiryInfo.color, fontWeight: '600' }}>
                          {expiryInfo.text}
                        </div>
                      </div>
                    );
                  })}
                </div>
              )}
            </div>
          )}

          {/* Main Content */}
          <main style={{ maxWidth: '1200px', margin: '0 auto', padding: '2rem 1.5rem' }}>
            
            {/* Free Plan Banner */}
            {remainingItems <= 10 && remainingItems > 0 && (
              <div style={{
                background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)',
                borderRadius: '16px',
                padding: '1rem 1.5rem',
                marginBottom: '1.5rem',
                display: 'flex',
                justifyContent: 'space-between',
                alignItems: 'center',
                border: '1px solid #fbbf24'
              }}>
                <div>
                  <div style={{ fontWeight: '700', marginBottom: '0.25rem' }}>
                    {t.itemsRemaining.replace('{count}', remainingItems)}
                  </div>
                  <div style={{ fontSize: '0.85rem', color: '#92400e' }}>
                    {t.upgradePrompt}
                  </div>
                </div>
                <button
                  onClick={() => setShowUpgradeModal(true)}
                  style={{
                    background: '#f59e0b',
                    color: 'white',
                    border: 'none',
                    borderRadius: '8px',
                    padding: '0.5rem 1rem',
                    fontWeight: '600',
                    cursor: 'pointer',
                    display: 'flex',
                    alignItems: 'center',
                    gap: '0.5rem',
                    fontSize: '0.9rem'
                  }}
                >
                  <Crown size={16} />
                  {t.upgrade}
                </button>
              </div>
            )}
            
            {/* Stats Cards */}
            <div style={{
              display: 'grid',
              gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))',
              gap: '1rem',
              marginBottom: '2rem'
            }}>
              {categories.map(cat => {
                const count = items.filter(item => item.category === cat.id).length;
                return (
                  <div key={cat.id} style={{
                    background: 'white',
                    borderRadius: '16px',
                    padding: '1.5rem',
                    boxShadow: '0 2px 8px rgba(0, 0, 0, 0.04)',
                    border: '1px solid rgba(0, 0, 0, 0.05)',
                    transition: 'all 0.3s'
                  }}>
                    <div style={{ fontSize: '2rem', marginBottom: '0.5rem' }}>{cat.icon}</div>
                    <div style={{ fontSize: '0.85rem', color: '#6b7280', marginBottom: '0.25rem' }}>{cat.name}</div>
                    <div style={{ fontSize: '1.75rem', fontWeight: '700', color: cat.color }}>{count}</div>
                  </div>
                );
              })}
            </div>

            {/* Search and Filters */}
            <div style={{
              background: 'white',
              borderRadius: '16px',
              padding: '1.5rem',
              marginBottom: '2rem',
              boxShadow: '0 2px 8px rgba(0, 0, 0, 0.04)',
              border: '1px solid rgba(0, 0, 0, 0.05)'
            }}>
              <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>
                <div style={{ position: 'relative' }}>
                  <Search style={{ position: 'absolute', left: '12px', top: '50%', transform: 'translateY(-50%)', color: '#9ca3af' }} size={20} />
                  <input
                    type="text"
                    placeholder={t.searchPlaceholder}
                    value={searchQuery}
                    onChange={(e) => setSearchQuery(e.target.value)}
                    style={{
                      width: '100%',
                      padding: '0.75rem 1rem 0.75rem 2.75rem',
                      border: '1px solid #e5e7eb',
                      borderRadius: '10px',
                      fontSize: '16px',
                      fontFamily: 'inherit'
                    }}
                  />
                </div>
                
                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>
                  <select
                    value={filterCategory}
                    onChange={(e) => setFilterCategory(e.target.value)}
                    style={{
                      padding: '0.75rem 1rem',
                      border: '1px solid #e5e7eb',
                      borderRadius: '10px',
                      fontSize: '16px',
                      cursor: 'pointer',
                      fontFamily: 'inherit'
                    }}
                  >
                    <option value="all">{t.allCategories}</option>
                    {categories.map(cat => (
                      <option key={cat.id} value={cat.id}>{cat.icon} {cat.name}</option>
                    ))}
                  </select>
                  
                  <select
                    value={filterLocation}
                    onChange={(e) => setFilterLocation(e.target.value)}
                    style={{
                      padding: '0.75rem 1rem',
                      border: '1px solid #e5e7eb',
                      borderRadius: '10px',
                      fontSize: '16px',
                      cursor: 'pointer',
                      fontFamily: 'inherit'
                    }}
                  >
                    <option value="all">{t.allLocations}</option>
                    {locations.map(loc => (
                      <option key={loc.id} value={loc.id}>{loc.name}</option>
                    ))}
                  </select>
                </div>
                
                {items.length > 0 && (
                  <button
                    onClick={exportToCSV}
                    style={{
                      padding: '0.75rem',
                      background: '#f3f4f6',
                      border: '1px solid #e5e7eb',
                      borderRadius: '10px',
                      fontSize: '0.9rem',
                      fontWeight: '600',
                      cursor: 'pointer',
                      display: 'flex',
                      alignItems: 'center',
                      justifyContent: 'center',
                      gap: '0.5rem'
                    }}
                  >
                    <Download size={18} />
                    {t.exportData}
                  </button>
                )}
              </div>
            </div>

            {/* Items List */}
            {filteredItems.length === 0 ? (
              <div style={{
                background: 'white',
                borderRadius: '16px',
                padding: '4rem 2rem',
                textAlign: 'center',
                boxShadow: '0 2px 8px rgba(0, 0, 0, 0.04)'
              }}>
                <Package size={64} color="#d1d5db" style={{ margin: '0 auto 1rem' }} />
                <h3 style={{ color: '#6b7280', fontSize: '1.1rem', marginBottom: '0.5rem' }}>
                  {searchQuery || filterCategory !== 'all' || filterLocation !== 'all' 
                    ? t.noResults
                    : t.noItems}
                </h3>
                <p style={{ color: '#9ca3af', fontSize: '0.9rem' }}>
                  {searchQuery || filterCategory !== 'all' || filterLocation !== 'all'
                    ? t.noResultsDesc
                    : t.noItemsDesc}
                </p>
              </div>
            ) : (
              <div style={{ display: 'grid', gap: '1rem' }}>
                {filteredItems.map(item => {
                  const categoryInfo = getCategoryInfo(item.category);
                  const expiryInfo = item.expiryDate ? getExpiryStatus(item.expiryDate) : null;
                  
                  return (
                    <div key={item.id} style={{
                      background: 'white',
                      borderRadius: '16px',
                      padding: '1.5rem',
                      boxShadow: '0 2px 8px rgba(0, 0, 0, 0.04)',
                      border: '1px solid rgba(0, 0, 0, 0.05)',
                      transition: 'all 0.3s'
                    }}>
                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>
                        <div style={{ flex: 1 }}>
                          <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', marginBottom: '0.75rem', flexWrap: 'wrap' }}>
                            <span style={{
                              background: `${categoryInfo.color}15`,
                              color: categoryInfo.color,
                              padding: '0.25rem 0.75rem',
                              borderRadius: '6px',
                              fontSize: '0.75rem',
                              fontWeight: '600'
                            }}>
                              {categoryInfo.icon} {categoryInfo.name}
                            </span>
                            {expiryInfo && (
                              <span style={{
                                background: `${expiryInfo.color}15`,
                                color: expiryInfo.color,
                                padding: '0.25rem 0.75rem',
                                borderRadius: '6px',
                                fontSize: '0.75rem',
                                fontWeight: '600'
                              }}>
                                <Calendar size={12} style={{ display: 'inline', marginRight: '4px', verticalAlign: 'middle' }} />
                                {expiryInfo.text}
                              </span>
                            )}
                          </div>
                          
                          <h3 style={{ 
                            fontSize: '1.25rem', 
                            fontWeight: '700', 
                            marginBottom: '0.75rem',
                            color: '#111827'
                          }}>
                            {item.name}
                          </h3>
                          
                          <div style={{ 
                            display: 'grid', 
                            gridTemplateColumns: 'repeat(auto-fit, minmax(140px, 1fr))',
                            gap: '0.75rem',
                            fontSize: '0.85rem',
                            color: '#6b7280'
                          }}>
                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                              <Package size={16} color="#9ca3af" />
                              <span>{t.quantity}: {item.quantity}</span>
                            </div>
                            
                            {item.price && (
                              <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                                <Tag size={16} color="#9ca3af" />
                                <span>{language === 'ja' ? 'Â¥' : '$'}{parseInt(item.price).toLocaleString()}</span>
                              </div>
                            )}
                            
                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                              <MapPin size={16} color="#9ca3af" />
                              <span>{getLocationName(item.location)}</span>
                            </div>
                            
                            {item.store && (
                              <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                                <ShoppingCart size={16} color="#9ca3af" />
                                <span>{item.store}</span>
                              </div>
                            )}
                            
                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                              <Calendar size={16} color="#9ca3af" />
                              <span>{item.purchaseDate}</span>
                            </div>
                          </div>
                          
                          {item.notes && (
                            <div style={{
                              marginTop: '0.75rem',
                              padding: '0.75rem',
                              background: '#f9fafb',
                              borderRadius: '8px',
                              fontSize: '0.85rem',
                              color: '#6b7280'
                            }}>
                              {item.notes}
                            </div>
                          )}
                        </div>
                        
                        <button
                          onClick={() => handleDelete(item.id)}
                          style={{
                            background: '#fee2e2',
                            border: 'none',
                            borderRadius: '8px',
                            padding: '0.5rem',
                            cursor: 'pointer',
                            transition: 'all 0.2s',
                            marginLeft: '1rem',
                            flexShrink: 0
                          }}
                        >
                          <Trash2 size={18} color="#ef4444" />
                        </button>
                      </div>
                    </div>
                  );
                })}
              </div>
            )}
          </main>

          {/* Add Form Modal */}
          {showAddForm && (
            <div style={{
              position: 'fixed',
              top: 0,
              left: 0,
              right: 0,
              bottom: 0,
              background: 'rgba(0, 0, 0, 0.5)',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              zIndex: 300,
              padding: '1rem'
            }}
            onClick={() => setShowAddForm(false)}>
              <div style={{
                background: 'white',
                borderRadius: '20px',
                padding: '2rem',
                maxWidth: '600px',
                width: '100%',
                maxHeight: '90vh',
                overflowY: 'auto',
                boxShadow: '0 20px 60px rgba(0, 0, 0, 0.3)'
              }}
              onClick={(e) => e.stopPropagation()}>
                <h2 style={{ 
                  fontSize: '1.5rem', 
                  fontWeight: '700', 
                  marginBottom: '1.5rem',
                  display: 'flex',
                  alignItems: 'center',
                  gap: '0.75rem'
                }}>
                  <Plus size={28} color="#10b981" />
                  {t.addItem}
                </h2>
                
                <form onSubmit={handleSubmit}>
                  <div style={{ display: 'flex', flexDirection: 'column', gap: '1.25rem' }}>
                    
                    <div>
                      <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600', fontSize: '0.9rem' }}>
                        {t.itemName} *
                      </label>
                      <input
                        type="text"
                        required
                        value={formData.name}
                        onChange={(e) => setFormData({...formData, name: e.target.value})}
                        placeholder={t.itemNamePlaceholder}
                        style={{
                          width: '100%',
                          padding: '0.75rem',
                          border: '1px solid #e5e7eb',
                          borderRadius: '10px',
                          fontSize: '16px',
                          fontFamily: 'inherit'
                        }}
                      />
                    </div>

                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>
                      <div>
                        <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600', fontSize: '0.9rem' }}>
                          {t.category}
                        </label>
                        <select
                          value={formData.category}
                          onChange={(e) => setFormData({...formData, category: e.target.value})}
                          style={{
                            width: '100%',
                            padding: '0.75rem',
                            border: '1px solid #e5e7eb',
                            borderRadius: '10px',
                            fontSize: '16px',
                            cursor: 'pointer',
                            fontFamily: 'inherit'
                          }}
                        >
                          {categories.map(cat => (
                            <option key={cat.id} value={cat.id}>{cat.icon} {cat.name}</option>
                          ))}
                        </select>
                      </div>
                      
                      <div>
                        <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600', fontSize: '0.9rem' }}>
                          {t.quantity}
                        </label>
                        <input
                          type="number"
                          min="1"
                          value={formData.quantity}
                          onChange={(e) => setFormData({...formData, quantity: e.target.value})}
                          style={{
                            width: '100%',
                            padding: '0.75rem',
                            border: '1px solid #e5e7eb',
                            borderRadius: '10px',
                            fontSize: '16px',
                            fontFamily: 'inherit'
                          }}
                        />
                      </div>
                    </div>

                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>
                      <div>
                        <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600', fontSize: '0.9rem' }}>
                          {t.price}
                        </label>
                        <input
                          type="number"
                          value={formData.price}
                          onChange={(e) => setFormData({...formData, price: e.target.value})}
                          placeholder={t.optional}
                          style={{
                            width: '100%',
                            padding: '0.75rem',
                            border: '1px solid #e5e7eb',
                            borderRadius: '10px',
                            fontSize: '16px',
                            fontFamily: 'inherit'
                          }}
                        />
                      </div>
                      
                      <div>
                        <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600', fontSize: '0.9rem' }}>
                          {t.purchaseDate}
                        </label>
                        <input
                          type="date"
                          value={formData.purchaseDate}
                          onChange={(e) => setFormData({...formData, purchaseDate: e.target.value})}
                          style={{
                            width: '100%',
                            padding: '0.75rem',
                            border: '1px solid #e5e7eb',
                            borderRadius: '10px',
                            fontSize: '16px',
                            fontFamily: 'inherit'
                          }}
                        />
                      </div>
                    </div>

                    {formData.category === 'food' && (
                      <div>
                        <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600', fontSize: '0.9rem' }}>
                          {t.expiryDate}
                        </label>
                        <input
                          type="date"
                          value={formData.expiryDate}
                          onChange={(e) => setFormData({...formData, expiryDate: e.target.value})}
                          style={{
                            width: '100%',
                            padding: '0.75rem',
                            border: '1px solid #e5e7eb',
                            borderRadius: '10px',
                            fontSize: '16px',
                            fontFamily: 'inherit'
                          }}
                        />
                      </div>
                    )}

                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>
                      <div>
                        <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600', fontSize: '0.9rem' }}>
                          {t.location}
                        </label>
                        <select
                          value={formData.location}
                          onChange={(e) => setFormData({...formData, location: e.target.value})}
                          style={{
                            width: '100%',
                            padding: '0.75rem',
                            border: '1px solid #e5e7eb',
                            borderRadius: '10px',
                            fontSize: '16px',
                            cursor: 'pointer',
                            fontFamily: 'inherit'
                          }}
                        >
                          {locations.map(loc => (
                            <option key={loc.id} value={loc.id}>{loc.name}</option>
                          ))}
                        </select>
                      </div>
                      
                      <div>
                        <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600', fontSize: '0.9rem' }}>
                          {t.store}
                        </label>
                        <input
                          type="text"
                          value={formData.store}
                          onChange={(e) => setFormData({...formData, store: e.target.value})}
                          placeholder={t.storePlaceholder}
                          style={{
                            width: '100%',
                            padding: '0.75rem',
                            border: '1px solid #e5e7eb',
                            borderRadius: '10px',
                            fontSize: '16px',
                            fontFamily: 'inherit'
                          }}
                        />
                      </div>
                    </div>

                    <div>
                      <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600', fontSize: '0.9rem' }}>
                        {t.notes}
                      </label>
                      <textarea
                        value={formData.notes}
                        onChange={(e) => setFormData({...formData, notes: e.target.value})}
                        placeholder={t.notesPlaceholder}
                        rows="3"
                        style={{
                          width: '100%',
                          padding: '0.75rem',
                          border: '1px solid #e5e7eb',
                          borderRadius: '10px',
                          fontSize: '16px',
                          fontFamily: 'inherit',
                          resize: 'vertical'
                        }}
                      />
                    </div>

                    <div style={{ display: 'flex', gap: '1rem', marginTop: '0.5rem' }}>
                      <button
                        type="button"
                        onClick={() => setShowAddForm(false)}
                        style={{
                          flex: 1,
                          padding: '0.875rem',
                          background: '#f3f4f6',
                          border: 'none',
                          borderRadius: '10px',
                          fontSize: '16px',
                          fontWeight: '600',
                          cursor: 'pointer'
                        }}
                      >
                        {t.cancel}
                      </button>
                      <button
                        type="submit"
                        style={{
                          flex: 1,
                          padding: '0.875rem',
                          background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                          color: 'white',
                          border: 'none',
                          borderRadius: '10px',
                          fontSize: '16px',
                          fontWeight: '600',
                          cursor: 'pointer',
                          boxShadow: '0 4px 12px rgba(16, 185, 129, 0.3)'
                        }}
                      >
                        {t.addButton}
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          )}

          {/* Upgrade Modal */}
          {showUpgradeModal && (
            <div style={{
              position: 'fixed',
              top: 0,
              left: 0,
              right: 0,
              bottom: 0,
              background: 'rgba(0, 0, 0, 0.5)',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              zIndex: 300,
              padding: '1rem'
            }}
            onClick={() => setShowUpgradeModal(false)}>
              <div style={{
                background: 'white',
                borderRadius: '20px',
                padding: '2rem',
                maxWidth: '600px',
                width: '100%',
                maxHeight: '90vh',
                overflowY: 'auto',
                boxShadow: '0 20px 60px rgba(0, 0, 0, 0.3)'
              }}
              onClick={(e) => e.stopPropagation()}>
                <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
                  <div style={{ fontSize: '3rem', marginBottom: '1rem' }}>ðŸ‘‘</div>
                  <h2 style={{ fontSize: '1.75rem', fontWeight: '700', marginBottom: '0.5rem' }}>
                    {t.upgrade} to Premium
                  </h2>
                  <p style={{ color: '#6b7280', fontSize: '0.95rem' }}>
                    {t.comingSoon}
                  </p>
                </div>
                
                <div style={{ display: 'grid', gap: '1rem', marginBottom: '2rem' }}>
                  {/* Free Plan */}
                  <div style={{
                    border: '2px solid #e5e7eb',
                    borderRadius: '12px',
                    padding: '1.5rem'
                  }}>
                    <div style={{ fontWeight: '700', fontSize: '1.1rem', marginBottom: '0.5rem' }}>
                      {t.freePlan}
                    </div>
                    <div style={{ fontSize: '2rem', fontWeight: '700', marginBottom: '1rem' }}>
                      {language === 'ja' ? 'Â¥0' : '$0'}
                    </div>
                    <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>
                      <li style={{ padding: '0.5rem 0', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                        <Check size={18} color="#10b981" />
                        <span>{language === 'ja' ? '30ã‚¢ã‚¤ãƒ†ãƒ ã¾ã§' : 'Up to 30 items'}</span>
                      </li>
                      <li style={{ padding: '0.5rem 0', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                        <Check size={18} color="#10b981" />
                        <span>{language === 'ja' ? 'åŸºæœ¬æ©Ÿèƒ½' : 'Basic features'}</span>
                      </li>
                    </ul>
                  </div>
                  
                  {/* Premium Plan */}
                  <div style={{
                    border: '2px solid #10b981',
                    borderRadius: '12px',
                    padding: '1.5rem',
                    background: 'linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%)',
                    position: 'relative'
                  }}>
                    <div style={{
                      position: 'absolute',
                      top: '-12px',
                      left: '50%',
                      transform: 'translateX(-50%)',
                      background: '#10b981',
                      color: 'white',
                      padding: '0.25rem 1rem',
                      borderRadius: '20px',
                      fontSize: '0.75rem',
                      fontWeight: '700'
                    }}>
                      {language === 'ja' ? 'äººæ°—' : 'Popular'}
                    </div>
                    <div style={{ fontWeight: '700', fontSize: '1.1rem', marginBottom: '0.5rem' }}>
                      {t.premiumPlan}
                    </div>
                    <div style={{ fontSize: '2rem', fontWeight: '700', marginBottom: '0.25rem' }}>
                      {language === 'ja' ? 'Â¥480' : '$4.99'}
                      <span style={{ fontSize: '1rem', fontWeight: '400', color: '#6b7280' }}>{t.perMonth}</span>
                    </div>
                    <div style={{ fontSize: '0.85rem', color: '#6b7280', marginBottom: '1rem' }}>
                      {language === 'ja' ? 'ã¾ãŸã¯ Â¥4,800/å¹´ (2ãƒ¶æœˆç„¡æ–™)' : 'or $49.99/yr (2 months free)'}
                    </div>
                    <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>
                      <li style={{ padding: '0.5rem 0', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                        <Check size={18} color="#10b981" />
                        <span>{language === 'ja' ? 'ç„¡åˆ¶é™ã‚¢ã‚¤ãƒ†ãƒ ' : 'Unlimited items'}</span>
                      </li>
                      <li style={{ padding: '0.5rem 0', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                        <Check size={18} color="#10b981" />
                        <span>{language === 'ja' ? 'ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³' : 'Barcode scanning'}</span>
                      </li>
                      <li style={{ padding: '0.5rem 0', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                        <Check size={18} color="#10b981" />
                        <span>{language === 'ja' ? 'å®¶æ—å…±æœ‰ (5äºº)' : 'Family sharing (5 members)'}</span>
                      </li>
                      <li style={{ padding: '0.5rem 0', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                        <Check size={18} color="#10b981" />
                        <span>{language === 'ja' ? 'ãƒ¬ã‚·ãƒ¼ãƒˆOCR (æœˆ10æžš)' : 'Receipt OCR (10/mo)'}</span>
                      </li>
                    </ul>
                  </div>
                  
                  {/* Pro Plan */}
                  <div style={{
                    border: '2px solid #6366f1',
                    borderRadius: '12px',
                    padding: '1.5rem'
                  }}>
                    <div style={{ fontWeight: '700', fontSize: '1.1rem', marginBottom: '0.5rem' }}>
                      {t.proPlan}
                    </div>
                    <div style={{ fontSize: '2rem', fontWeight: '700', marginBottom: '0.25rem' }}>
                      {language === 'ja' ? 'Â¥980' : '$9.99'}
                      <span style={{ fontSize: '1rem', fontWeight: '400', color: '#6b7280' }}>{t.perMonth}</span>
                    </div>
                    <div style={{ fontSize: '0.85rem', color: '#6b7280', marginBottom: '1rem' }}>
                      {language === 'ja' ? 'ã¾ãŸã¯ Â¥9,800/å¹´' : 'or $99/yr'}
                    </div>
                    <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>
                      <li style={{ padding: '0.5rem 0', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                        <Check size={18} color="#10b981" />
                        <span>{language === 'ja' ? 'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã®å…¨æ©Ÿèƒ½' : 'All Premium features'}</span>
                      </li>
                      <li style={{ padding: '0.5rem 0', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                        <Check size={18} color="#10b981" />
                        <span>{language === 'ja' ? 'ãƒ¬ã‚·ãƒ¼ãƒˆOCRç„¡åˆ¶é™' : 'Unlimited receipt OCR'}</span>
                      </li>
                      <li style={{ padding: '0.5rem 0', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                        <Check size={18} color="#10b981" />
                        <span>{language === 'ja' ? 'è³¼è²·åˆ†æžãƒ¬ãƒãƒ¼ãƒˆ' : 'Purchase analytics'}</span>
                      </li>
                      <li style={{ padding: '0.5rem 0', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                        <Check size={18} color="#10b981" />
                        <span>{language === 'ja' ? 'å„ªå…ˆã‚µãƒãƒ¼ãƒˆ' : 'Priority support'}</span>
                      </li>
                    </ul>
                  </div>
                </div>
                
                <button
                  onClick={() => setShowUpgradeModal(false)}
                  style={{
                    width: '100%',
                    padding: '1rem',
                    background: '#f3f4f6',
                    border: 'none',
                    borderRadius: '10px',
                    fontSize: '1rem',
                    fontWeight: '600',
                    cursor: 'pointer'
                  }}
                >
                  {t.cancel}
                </button>
              </div>
            </div>
          )}

          <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&display=swap" rel="stylesheet" />
        </div>
      );
    };

    ReactDOM.render(<HomeStock />, document.getElementById('root'));
  </script>
  
  <script>
    // Register Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => console.log('SW registered'))
          .catch(err => console.log('SW registration failed'));
      });
    }
  </script>
</body>
</html>